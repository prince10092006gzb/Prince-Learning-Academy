<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Results - Prince Learning Academy</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .container { max-width: 1000px; margin: 0 auto; padding: 20px; }
        .header { background: rgba(255,255,255,0.95); padding: 1rem; border-radius: 15px; margin-bottom: 2rem; display: flex; justify-content: space-between; }
        .logo { font-size: 1.5rem; color: #667eea; font-weight: bold; }
        .back-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 25px; cursor: pointer; }
        .results-card { background: rgba(255,255,255,0.95); padding: 2.5rem; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
        .summary-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; }
        .stat-box { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 1.5rem; border-radius: 15px; text-align: center; }
        .stat-value { font-size: 1.8rem; font-weight: 700; }
        table { width: 100%; border-collapse: collapse; margin-top: 1.5rem; }
        th, td { padding: 1rem; text-align: left; border-bottom: 1px solid #e8ecf4; }
        th { background: #f8f9ff; font-weight: 600; }
        tr:hover { background: #f8f9ff; }
        .grade-a { color: #2ed573; font-weight: 700; }
        .grade-b { color: #ffa502; font-weight: 600; }
        .grade-c { color: #ff6b6b; }
        @media (max-width: 768px) { .summary-stats { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="students-db" id="studentsDB">
        const studentsDB = [/* SAME 29 STUDENTS AS main.html - COPIED EXACTLY */];
    </div>

    <div class="container">
        <div class="header">
            <div class="logo">üëë Prince Learning Academy</div>
            <button class="back-btn" onclick="goBack()">‚Üê Back to Dashboard</button>
        </div>

        <div class="results-card">
            <h1 style="color: #333; margin-bottom: 1rem;" id="resultsTitle">Sessional 1 Results</h1>
            <p style="color: #666; margin-bottom: 2rem;">External (40 marks) + Internal (10 marks) = Total 50 marks per subject</p>
            
            <div class="summary-stats" id="summaryStats"></div>
            
            <table>
                <thead>
                    <tr>
                        <th>Subject</th>
                        <th>Internal (10)</th>
                        <th>External (40)</th>
                        <th>Total (50)</th>
                        <th>Grade</th>
                    </tr>
                </thead>
                <tbody id="marksTable"></tbody>
            </table>
        </div>
    </div>

    <script>
        const studentsDB = eval(document.getElementById('studentsDB').textContent.match(/const studentsDB = [(.*?)];/s)[1] + ';');
        
        // MARKS DATA from aco.csv [file:23]
        const marksData = {
            "2025-0014": { subjects: { "English Lang 1": {internal: "-", external: "-", total: 0}, "English Lang 2": {internal: "-", external: "-", total: 0}, "English Lit": {internal: "-", external: "-", total: 0}, "Computer": {internal: "-", external: "-", total: 0} } },
            "2025-0015": { subjects: { "English Lang 1": {internal: 7, external: 17, total: 24}, "English Lang 2": {internal: 8, external: 16, total: 24} } },
            "2025-0016": { subjects: { "English Lang 1": {internal: 7, external: 8, total: 15}, "English Lang 2": {internal: 7, external: 12, total: 19} } },
            "2025-0017": { subjects: { "English Lang 1": {internal: 8, external: 15, total: 23}, "English Lang 2": {internal: 9, external: 28, total: 37} } },
            "2025-0019": { subjects: { "English Lang 1": {internal: 6, external: 15, total: 21}, "English Lang 2": {internal: 8, external: 18, total: 26} } },
            "2025-0020": { subjects: { "English Lang 1": {internal: 6, external: "-", total: 6}, "English Lang 2": {internal: 8, external: "-", total: 8} } },
            "2025-0021": { subjects: { "English Lang 1": {internal: 6, external: 12, total: 18}, "English Lang 2": {internal: 6, external: 0, total: 6} } },
            "2025-0007": { subjects: { "Chemistry": {internal: "-", external: 21, total: 21}, "Eng Gr": {internal: "-", external: 0, total: 0} } },
            "2025-0008": { subjects: { "Chemistry": {internal: "-", external: 11, total: 11}, "Eng Gr": {internal: "-", external: 3, total: 3} } },
            "2025-0011": { subjects: { "Chemistry": {internal: "-", external: 21, total: 21}, "Eng Gr": {internal: "-", external: 21, total: 21} } }
        };
        
        const studentId = sessionStorage.getItem('studentId');
        const password = sessionStorage.getItem('studentPassword');
        const studentName = sessionStorage.getItem('studentName');
        
        if (!studentId || !password || !studentName) {
            window.location.href = 'main.html';
            return;
        }
        
        const student = studentsDB.find(s => s.id === studentId && s.password === password);
        if (!student) {
            window.location.href = 'main.html';
            return;
        }
        
        document.getElementById('resultsTitle').textContent = `${studentName}'s Sessional 1 Results`;
        
        const studentMarks = marksData[studentId] || { subjects: {} };
        const subjects = studentMarks.subjects;
        
        let totalMarks = 0, maxMarks = 0, appearedCount = 0;
        Object.values(subjects).forEach(s => {
            if (s.total > 0) {
                totalMarks += s.total;
                maxMarks += 50;
                appearedCount++;
            }
        });
        
        const percentage = maxMarks > 0 ? ((totalMarks / maxMarks) * 100).toFixed(1) : 0;
        const grade = percentage >= 80 ? 'A' : percentage >= 60 ? 'B' : percentage >= 40 ? 'C' : 'D';
        
        document.getElementById('summaryStats').innerHTML = `
            <div class="stat-box">
                <div class="stat-value">${percentage}%</div>
                <div>Overall</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">${totalMarks}/${maxMarks}</div>
                <div>Total Marks</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">${appearedCount}</div>
                <div>Subjects</div>
            </div>
            <div class="stat-box">
                <div class="stat-value grade-${grade.toLowerCase()}">${grade}</div>
                <div>Grade</div>
            </div>
        `;
        
        let tableRows = '';
        Object.entries(subjects).forEach(([subject, marks]) => {
            const subjGrade = (marks.total / 50) * 100 >= 80 ? 'A' : (marks.total / 50) * 100 >= 60 ? 'B' : 'C';
            tableRows += `
                <tr>
                    <td>${subject}</td>
                    <td>${marks.internal || '-'}</td>
                    <td>${marks.external || '-'}</td>
                    <td>${marks.total || 0}</td>
                    <td class="grade-${subjGrade.toLowerCase()}">${subjGrade}</td>
                </tr>
            `;
        });
        
        if (tableRows === '') {
            tableRows = '<tr><td colspan="5" style="text-align:center; padding:2rem;">No marks entered yet</td></tr>';
        }
        
        document.getElementById('marksTable').innerHTML = tableRows;
        
        function goBack() {
            window.location.href = 'main.html';
        }
    </script>
</body>
</html>
